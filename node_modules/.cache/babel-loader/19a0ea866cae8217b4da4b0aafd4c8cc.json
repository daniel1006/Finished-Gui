{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/daniel/Desktop/daniel-spa/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport Keycloak from \"keycloak-js\";\nimport AccountBox from './AccountBox';\nimport MessageBox from './MessageBox';\nimport './App.css';\nlet keycloak = new Keycloak({\n  url: 'https://login.t2data.com/auth/',\n  realm: 'kramfors',\n  clientId: 'spa'\n});\nvar serviceUrl = 'https://lb.t2data.com/simple/v1';\n\nfunction App() {\n  _s();\n\n  const [authenticated, authenticate] = useState(false);\n  const [response, setResponse] = useState('');\n  const [error, hasError] = useState(false);\n  keycloak.init({\n    onLoad: 'check-sso',\n    checkLoginIframeInterval: 1\n  }).then(() => {\n    if (keycloak.authenticated) {\n      authenticate(true);\n    } else {\n      authenticate(false);\n    }\n  });\n\n  keycloak.onAuthLogout = () => authenticate(false);\n\n  const request = endpoint => {\n    const options = {\n      method: 'GET'\n    };\n\n    if (keycloak.authenticated) {\n      options.headers = {\n        Authorization: `Bearer ${keycloak.token}`\n      };\n    }\n\n    const url = `${serviceUrl}/${endpoint}`;\n    console.log({\n      url\n    });\n    console.log({\n      options\n    });\n    fetch(url, options).then(response => {\n      if (response.status === 200) {\n        response.text().then(text => {\n          setResponse('Message: ' + text);\n        });\n        hasError(false);\n      } else if (response.status === 0) {\n        setResponse('Request failed');\n        hasError(true);\n      } else {\n        setResponse(response.status + ' ' + response.statusText);\n        hasError(true);\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"https://lb.t2data.com/simple/v1/ui\",\n      children: \"Backend\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"https://login.microsoftonline.com/logout.srf\",\n      children: \"Azure logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"L1\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"L2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 32\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Content\",\n      children: [/*#__PURE__*/_jsxDEV(AccountBox, {\n        authenticated: authenticated,\n        keycloak: keycloak\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Box\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button1\",\n          onClick: () => request('public'),\n          children: \"Invoke public \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button1\",\n          onClick: () => request('secure'),\n          children: \"Invoke secure\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button1\",\n          onClick: () => request('admin'),\n          children: \"Invoke admin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(MessageBox, {\n          message: response,\n          error: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 7\n  }, this);\n}\n\n_s(App, \"Zmi+us9rZ8gOyzUd/qc2Nu5ZrVk=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/daniel/Desktop/daniel-spa/src/App.js"],"names":["React","useState","Keycloak","AccountBox","MessageBox","keycloak","url","realm","clientId","serviceUrl","App","authenticated","authenticate","response","setResponse","error","hasError","init","onLoad","checkLoginIframeInterval","then","onAuthLogout","request","endpoint","options","method","headers","Authorization","token","console","log","fetch","status","text","statusText"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Keycloak from \"keycloak-js\";\n\nimport AccountBox from './AccountBox';\nimport MessageBox from './MessageBox';\n\nimport './App.css';\n\nlet keycloak = new Keycloak({url: 'https://login.t2data.com/auth/', realm: 'kramfors', clientId: 'spa'});\nvar serviceUrl = 'https://lb.t2data.com/simple/v1'\n\nfunction App() {\n  const [authenticated, authenticate] = useState(false);\n  const [response, setResponse] = useState('');\n  const [error, hasError] = useState(false);\n\n  keycloak.init({ onLoad: 'check-sso', checkLoginIframeInterval: 1 }).then(() => {\n    if (keycloak.authenticated) {\n      authenticate(true);\n    } else {\n      authenticate(false);\n    }\n  });\n\n  keycloak.onAuthLogout = () => authenticate(false);\n\n  const request = (endpoint) => {\n    const options = {\n      method: 'GET'\n    }\n\n    if (keycloak.authenticated) {\n      options.headers = {Authorization: `Bearer ${keycloak.token}`};\n    }\n    const url = `${serviceUrl}/${endpoint}`;\n    console.log({url})\n    console.log({options})\n    fetch(url, options).then((response) => {\n      if (response.status === 200) {\n        response.text().then((text) => {\n          setResponse('Message: ' + text);\n        });\n        hasError(false);\n      } else if (response.status === 0) {\n        setResponse('Request failed');\n        hasError(true);\n      } else {\n        setResponse(response.status + ' ' + response.statusText);\n        hasError(true);\n      }\n    });\n  }\n\n  return (\n      <div className=\"App\">\n        <a href=\"https://lb.t2data.com/simple/v1/ui\">Backend</a>\n        <a href=\"https://login.microsoftonline.com/logout.srf\">Azure logout</a>\n        <div className=\"L1\" /> <div className=\"L2\" />\n        <div className=\"Content\">\n          <AccountBox authenticated={authenticated} keycloak={keycloak}/>\n          <div className=\"Box\">\n            <button className=\"button1\" onClick={() => request('public')}>Invoke public </button>\n            <button className=\"button1\" onClick={() => request('secure')}>Invoke secure</button>\n            <button className=\"button1\" onClick={() => request('admin')}>Invoke admin</button>\n            <MessageBox message={response} error={error}/>\n          </div>\n        </div>\n      </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}